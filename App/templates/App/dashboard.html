{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceMate</title>
    <link rel="stylesheet" href="{% static 'dashstyle.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

</head>
<body>
    <nav>
        <div id="navbar" style="margin: 0%;height: 12vh; display: flex; justify-content: space-between; background-color: rgba(140, 140, 140, 0.137); display: flex; justify-content: space-between; align-items: center;">
            <div id="navleft" style="margin-left: 50px;  ">
                <button class="logo" data-text="Awesome">
                    <span class="actual-logo">&nbsp;FinanceMate&nbsp;</span>
                    <span aria-hidden="true" class="hover-logo">&nbsp;FinanceMate&nbsp;</span>
                </button>
            </div>
            <div class="navright" style="margin-right: 70px;">
                  <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Menu
                    </button>
                    <ul id="dropdwn" class="dropdown-menu">
                      <li class="itemdropdown"><a class="dropdown-item" href="{% url 'expenses' username %}">Expenses</a></li>
                      <li class="itemdropdown"><a class="dropdown-item" href="{% url 'budget' username %}">Budget</a></li>
                      <li class="itemdropdown"><a class="dropdown-item" href="{% url 'income' username %}">Income</a></li>
                      <li id="separator-dd"><hr class="dropdown-divider"></li>
                        <li class="itemdropdown"><a class="dropdown-item" href="{% url 'Home' %}">Logout</a></li>

                    </ul>
                  </div>
            </div>


            </div>
        </div> 
    </nav>

    {% if isvalid %}
    <div class="card-client">
        <div class="user-picture">
            <svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
                <path d="M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"></path>
            </svg>
        </div>
        <p class="name-client"> {{username}} <br>
            <span>Profile
            </span>
        </p>
        <button class="editBtn" type="button" data-bs-toggle="offcanvas" data-bs-target="#staticBackdrop" aria-controls="staticBackdrop">
            <svg height="1em" viewBox="0 0 512 512">
              <path
                d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"
              ></path>
            </svg>
          </button>
    </div>

    <div id="expensecard" style="margin: 20px; border-radius: 30px ; height: auto;width: 97%; padding: 120px; padding-top: 30px; background-color: #ffffff53;">
      <br>
      <h2 style="color: aliceblue;">Recent Expenses: <br>___________________</h2>
      {% if data %}
        <table  style="width: 70%;padding-bottom: 30px; border-style:solid ; border-collapse: collapse; border-width: 2px ;  border-color: rgb(255, 255, 255) ;height: 250px;">
        <thead >
          <tr>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px ;border-collapse: collapse; border-width: 2px 0px; text-align: center; border-color: rgb(255, 255, 255) ;">Sr. No.</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Category</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Amount</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Date</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Description</th>
          </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                <th scope="row" style="background-color: #1cd5c5ae; border-style:solid ; padding: 15px; border-collapse: collapse; text-align: center; border-width: 2px 0px;  border-color: rgb(255, 255, 255) ;">{{row.7}}</th>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center;  border-color: rgb(255, 255, 255) ;">{{row.3}}</td>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;   text-align: center; border-color: rgb(255, 255, 255) ;">{{row.4}}</td>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center;  border-color: rgb(255, 255, 255) ;">{{row.5}}</td>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">{{row.6}}</td>
            </tr>
            {% endfor %}
        </tbody>
      </table>
      {% else %}
      <h3 style="color: aliceblue;">No Recent Expenses!! <br>
      <a href="{% url 'expenses' username %}" style="color: white;"> Add Expenses </a>
      </h3>
      {% endif %}
      </div>

      <div id="budgetcard" style="margin: 20px; border-radius: 30px ; height: auto;width: 97%; padding: 120px; padding-top: 30px;padding-bottom: 30px; background-color: #ffffff53;">
        <br>
      <h2 style="color: aliceblue;">Budget Limits: <br>________________</h2>
      {% if data2 %}
        <table  style="width: 70%; border-style:solid ; border-collapse: collapse; border-width: 2px ;  border-color: rgb(255, 255, 255) ;height: 250px;">
        <thead >
          <tr>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px ;border-collapse: collapse; border-width: 2px 0px; text-align: center; border-color: rgb(255, 255, 255) ;">Sr. No.</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Category</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Budget Limit</th>
            <th scope="col" style="background-color: #03c393;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center; border-color: rgb(255, 255, 255) ;">Total Spends</th>
          </tr>
        </thead>
        <tbody>
            {% for row in data2 %}
            <tr>
                <th scope="row" style="background-color: #1cd5c5ae; border-style:solid ; padding: 15px; border-collapse: collapse; text-align: center; border-width: 2px 0px;  border-color: rgb(255, 255, 255) ;">{{row.4}}</th>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center;  border-color: rgb(255, 255, 255) ;">{{row.2}}</td>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;   text-align: center; border-color: rgb(255, 255, 255) ;">{{row.3}}</td>
                <td style="background-color: #1cd5c5ae;border-style:solid ; padding: 15px; border-collapse: collapse; border-width: 2px 0px;  text-align: center;  border-color: rgb(255, 255, 255) ;">{{row.5}}</td>
            </tr>
            {% endfor %}
        </tbody>
      </table>
      {% else %}
      <h3 style="color: aliceblue;">No Budget Limits set!! <br>
      <a href="{% url 'expenses' username %}" style="color: white;"> Add Budget </a>
      </h3>
      {% endif %}
      <br><br><br>
    </div>

      <div class="offcanvas offcanvas-start" data-bs-theme="dark" data-bs-backdrop="static" tabindex="-1" id="staticBackdrop" aria-labelledby="staticBackdropLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="staticBackdropLabel">Profile</h5>
          <button type="button" class="btn-close" style="color: #9fece2;" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <p id="canvasbreak">___________________</p>
        <div class="offcanvas-body">
          <div>
            <h5 id="uname">{{username}}</h5>
            
            <form id="ProfileForm" method="post" action="">
                {% csrf_token %}
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName" name="firstName" value="{{fname}}"><br>
                
                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName" name="lastName" value="{{lname}}"><br>
                
                
                <label for="gender">Gender:</label>
                <select id="gender" name="gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select><br>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="{{email}}"><br>
                
                <label for="profession">Profession:</label>
                <input type="text" id="profession" name="profession" value="{{profession}}"><br><br>
                
                <div id="canvasbuttons">
                    <button id="savebutton" name ="profileedit" class="btn btn-success" type="button" type="submit" data-bs-dismiss="offcanvas">Save</button>
                    <button class="btn btn-secondary" type="button" type="cancel" data-bs-dismiss="offcanvas" >Cancel</button>
                </div>
                
            </form>
          </div>
        </div>
      </div>

    {% else %}
    <div id="container" style="margin:5%;color: #03c393; ; background-color: rgba(18, 18, 18, 0.416); display: flex; justify-content: center; align-items: center; height: 70vh;">
        <h3 style="font-size: 50px;">ERROR 404! Page not found.</h3>
    </div>
    {% endif %}


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
</html>